<div>
    <header> 
        <h1>ColorPicker</h1>
    </header>

    <main> 

        <script src="https://unpkg.com/vanilla-picker@2"></script>
        {{!-- <script type="text/javascript" src="/js/colorPicker.js"></script> --}}
        <div class="row m-4">

              <p>Welcome to this crowd sourced color project. We aim to find the average of everyone's favorite and least favorite color. </p>

          </div>        
        <section>
            <h3 id= "prompt">Select your favorite color</h3>
            <div class="container">
                <div id="fixed"></div>
            </div>

        </section>

    </main>

<script>
//redirects the user to the results page if they've submitted before
    if(localStorage.getItem("submitted") != null){
         document.location.replace("/results");
    }
    let state = 1;
//bunch of code that generates the color picker element
function $(selector) { return document.querySelector(selector); }

    var parent = document.querySelector('#parent');
    var picker = new Picker(parent);
 

    picker.onChange = function(color) {

        colorCallback(color)

    };
    picker.onDone = function(color) {
        
    };

    const parentFixed = $('#fixed'),
      pickerFixed = new Picker({
          parent: parentFixed,
          popup: false,
          alpha: false,
          editor: false,
          color: 'black',
          onChange: function(color) {
              parentFixed.style.backgroundColor = color.rgbaString;
          },
          onDone: function(color) {
            //uses a state counter system to let the user pick twice, first for their favorite color and second for their least favorite
            //the rgb gets stored in local storage
              if (state === 1) {
                              console.log(color._rgba);
              const UserFavRed = color._rgba[0];
              console.log(UserFavRed);
              localStorage.setItem('FavRed', UserFavRed);


              const UserFavGreen = color._rgba[1];
              console.log(UserFavGreen);
              localStorage.setItem('FavGreen', UserFavGreen);


              const UserFavBlue = color._rgba[2];
              console.log(UserFavBlue);
              localStorage.setItem('FavBlue', UserFavBlue);


              $("#prompt").innerHTML = "Select your least favorite color";
              state ++; 
              console.log(state);
              }
              else {
                console.log(color._rgba);
              const UserLeastFavRed = color._rgba[0];
              console.log(UserLeastFavRed);
              localStorage.setItem('LeastFavRed', UserLeastFavRed);


              const UserLeastFavGreen = color._rgba[1];
              console.log(UserLeastFavGreen);
              localStorage.setItem('LeastFavGreen', UserLeastFavGreen);


              const UserLeastFavBlue = color._rgba[2];
              console.log(UserLeastFavBlue);
              localStorage.setItem('LeastFavBlue', UserLeastFavBlue);




              console.log("doing the redirect");
              document.location.replace("/results");

              }


          }
        });
        pickerFixed.setColor('black', true);



 
</script> 
<script>

//generates a random background color with a gradient
function changeBackground(){

    const x = Math.floor(Math.random() * 256);
    const y = Math.floor(Math.random() * 256);
    const z = Math.floor(Math.random() * 256);
    const bgColor1 = "rgb(" + x + "," + y + "," + z + ")";
 console.log(bgColor1);
    const a = Math.floor(Math.random() * 256);
    const b = Math.floor(Math.random() * 256);
    const c = Math.floor(Math.random() * 256);
    const bgColor2 = "rgb(" + a + "," + b + "," + c + ")";
 console.log(bgColor2);

       document.body.style.background =`linear-gradient(${bgColor1}, ${bgColor2})`;
    }
    changeBackground();
    

</script>
        <footer> 
        <nav>
            <ul>
               <li><a href="https://github.com/timholzer">Tim Holzer</a></li>
               <li><a href="https://github.com/JuanBoza">Juan Boza</a></li>
               <li><a href="https://github.com/Greg15323">Greg Rodriguez</a></li>
               <li><a href="https://github.com/hill1635">Tucker Hill</a></li>
            
                
                    <section>
                    <li><a href="social-share facebook">Share on Facebook
                    <img src="assets\facebook final .png" width="75px" height="75px"></a></li>
            
                    <li><a href="social-share twitter">Share on Twitter
                    <img src="assets\Twitter final .png" width="75px" height="75px"></a></li> 
                
                    <li><a href="social-share linkedin">Share on LinkedIn
                    <img src="assets\linkedin final .png" width="75px" height="75px"></a></li>
                    </section> 
            </ul>
        </nav>
        </footer>
